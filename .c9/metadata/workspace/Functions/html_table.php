{"filter":false,"title":"html_table.php","tooltip":"/Functions/html_table.php","undoManager":{"mark":15,"position":15,"stack":[[{"start":{"row":0,"column":0},"end":{"row":0,"column":1},"action":"insert","lines":["<"],"id":1}],[{"start":{"row":0,"column":1},"end":{"row":0,"column":2},"action":"insert","lines":["?"],"id":2}],[{"start":{"row":0,"column":2},"end":{"row":0,"column":3},"action":"insert","lines":["p"],"id":3}],[{"start":{"row":0,"column":3},"end":{"row":0,"column":4},"action":"insert","lines":["h"],"id":4}],[{"start":{"row":0,"column":4},"end":{"row":0,"column":5},"action":"insert","lines":["p"],"id":5}],[{"start":{"row":0,"column":5},"end":{"row":1,"column":0},"action":"insert","lines":["",""],"id":6}],[{"start":{"row":1,"column":0},"end":{"row":2,"column":0},"action":"insert","lines":["",""],"id":7}],[{"start":{"row":2,"column":0},"end":{"row":2,"column":1},"action":"insert","lines":["?"],"id":8}],[{"start":{"row":2,"column":1},"end":{"row":2,"column":2},"action":"insert","lines":[">"],"id":9}],[{"start":{"row":1,"column":0},"end":{"row":276,"column":15},"action":"insert","lines":["require_once('Library/fpdf/fpdf.php');","function hex2dec($couleur = \"#000000\"){","    $R = substr($couleur, 1, 2);","    $rouge = hexdec($R);","    $V = substr($couleur, 3, 2);","    $vert = hexdec($V);","    $B = substr($couleur, 5, 2);","    $bleu = hexdec($B);","    $tbl_couleur = array();","    $tbl_couleur['R']=$rouge;","    $tbl_couleur['G']=$vert;","    $tbl_couleur['B']=$bleu;","    return $tbl_couleur;","}","","//conversion pixel -> millimeter in 72 dpi","function px2mm($px){","    return $px*25.4/72;","}","","function txtentities($html){","    $trans = get_html_translation_table(HTML_ENTITIES);","    $trans = array_flip($trans);","    return strtr($html, $trans);","}","////////////////////////////////////","","class PDF extends FPDF","{","    //variables of html parser","    protected $B;","    protected $I;","    protected $U;","    protected $HREF;","    protected $fontList;","    protected $issetfont;","    protected $issetcolor;","    ","    function __construct($orientation='P', $unit='mm', $format='A4')","    {","        //Call parent constructor","        parent::__construct($orientation,$unit,$format);","    ","        //Initialization","        $this->B=0;","        $this->I=0;","        $this->U=0;","        $this->HREF='';","    ","        $this->tableborder=0;","        $this->tdbegin=false;","        $this->tdwidth=0;","        $this->tdheight=0;","        $this->tdalign=\"L\";","        $this->tdbgcolor=false;","    ","        $this->oldx=0;","        $this->oldy=0;","    ","        $this->fontlist=array(\"arial\",\"times\",\"courier\",\"helvetica\",\"symbol\");","        $this->issetfont=false;","        $this->issetcolor=false;","    }","    ","    //////////////////////////////////////","    //html parser","    ","    function WriteHTML($html)","    {","        $html=strip_tags($html,\"<b><u><i><a><img><p><br><strong><em><font><tr><blockquote><hr><td><tr><table><sup>\"); //remove all unsupported tags","        $html=str_replace(\"\\n\",'',$html); //replace carriage returns with spaces","        $html=str_replace(\"\\t\",'',$html); //replace carriage returns with spaces","        $a=preg_split('/<(.*)>/U',$html,-1,PREG_SPLIT_DELIM_CAPTURE); //explode the string","        foreach($a as $i=>$e)","        {","            if($i%2==0)","            {","                //Text","                if($this->HREF)","                    $this->PutLink($this->HREF,$e);","                elseif($this->tdbegin) {","                    if(trim($e)!='' && $e!=\"&nbsp;\") {","                        $this->Cell($this->tdwidth,$this->tdheight,$e,$this->tableborder,'',$this->tdalign,$this->tdbgcolor);","                    }","                    elseif($e==\"&nbsp;\") {","                        $this->Cell($this->tdwidth,$this->tdheight,'',$this->tableborder,'',$this->tdalign,$this->tdbgcolor);","                    }","                }","                else","                    $this->Write(5,stripslashes(txtentities($e)));","            }","            else","            {","                //Tag","                if($e[0]=='/')","                    $this->CloseTag(strtoupper(substr($e,1)));","                else","                {","                    //Extract attributes","                    $a2=explode(' ',$e);","                    $tag=strtoupper(array_shift($a2));","                    $attr=array();","                    foreach($a2 as $v)","                    {","                        if(preg_match('/([^=]*)=[\"\\']?([^\"\\']*)/',$v,$a3))","                            $attr[strtoupper($a3[1])]=$a3[2];","                    }","                    $this->OpenTag($tag,$attr);","                }","            }","        }","    }","    ","    function OpenTag($tag, $attr)","    {","        //Opening tag","        switch($tag){","    ","            case 'SUP':","                if( !empty($attr['SUP']) ) {    ","                    //Set current font to 6pt     ","                    $this->SetFont('','',6);","                    //Start 125cm plus width of cell to the right of left margin         ","                    //Superscript \"1\" ","                    $this->Cell(2,2,$attr['SUP'],0,0,'L');","                }","                break;","    ","            case 'TABLE': // TABLE-BEGIN","                if( !empty($attr['BORDER']) ) $this->tableborder=$attr['BORDER'];","                else $this->tableborder=0;","                break;","            case 'TR': //TR-BEGIN","                break;","            case 'TD': // TD-BEGIN","                if( !empty($attr['WIDTH']) ) $this->tdwidth=($attr['WIDTH']/4);","                else $this->tdwidth=40; // Set to your own width if you need bigger fixed cells","                if( !empty($attr['HEIGHT']) ) $this->tdheight=($attr['HEIGHT']/6);","                else $this->tdheight=6; // Set to your own height if you need bigger fixed cells","                if( !empty($attr['ALIGN']) ) {","                    $align=$attr['ALIGN'];        ","                    if($align=='LEFT') $this->tdalign='L';","                    if($align=='CENTER') $this->tdalign='C';","                    if($align=='RIGHT') $this->tdalign='R';","                }","                else $this->tdalign='L'; // Set to your own","                if( !empty($attr['BGCOLOR']) ) {","                    $coul=hex2dec($attr['BGCOLOR']);","                        $this->SetFillColor($coul['R'],$coul['G'],$coul['B']);","                        $this->tdbgcolor=true;","                    }","                $this->tdbegin=true;","                break;","    ","            case 'HR':","                if( !empty($attr['WIDTH']) )","                    $Width = $attr['WIDTH'];","                else","                    $Width = $this->w - $this->lMargin-$this->rMargin;","                $x = $this->GetX();","                $y = $this->GetY();","                $this->SetLineWidth(0.2);","                $this->Line($x,$y,$x+$Width,$y);","                $this->SetLineWidth(0.2);","                $this->Ln(1);","                break;","            case 'STRONG':","                $this->SetStyle('B',true);","                break;","            case 'EM':","                $this->SetStyle('I',true);","                break;","            case 'B':","            case 'I':","            case 'U':","                $this->SetStyle($tag,true);","                break;","            case 'A':","                $this->HREF=$attr['HREF'];","                break;","            case 'IMG':","                if(isset($attr['SRC']) && (isset($attr['WIDTH']) || isset($attr['HEIGHT']))) {","                    if(!isset($attr['WIDTH']))","                        $attr['WIDTH'] = 0;","                    if(!isset($attr['HEIGHT']))","                        $attr['HEIGHT'] = 0;","                    $this->Image($attr['SRC'], $this->GetX(), $this->GetY(), px2mm($attr['WIDTH']), px2mm($attr['HEIGHT']));","                }","                break;","            case 'BLOCKQUOTE':","            case 'BR':","                $this->Ln(5);","                break;","            case 'P':","                $this->Ln(10);","                break;","            case 'FONT':","                if (isset($attr['COLOR']) && $attr['COLOR']!='') {","                    $coul=hex2dec($attr['COLOR']);","                    $this->SetTextColor($coul['R'],$coul['G'],$coul['B']);","                    $this->issetcolor=true;","                }","                if (isset($attr['FACE']) && in_array(strtolower($attr['FACE']), $this->fontlist)) {","                    $this->SetFont(strtolower($attr['FACE']));","                    $this->issetfont=true;","                }","                if (isset($attr['FACE']) && in_array(strtolower($attr['FACE']), $this->fontlist) && isset($attr['SIZE']) && $attr['SIZE']!='') {","                    $this->SetFont(strtolower($attr['FACE']),'',$attr['SIZE']);","                    $this->issetfont=true;","                }","                break;","        }","    }","    ","    function CloseTag($tag)","    {","        //Closing tag","        if($tag=='SUP') {","        }","    ","        if($tag=='TD') { // TD-END","            $this->tdbegin=false;","            $this->tdwidth=0;","            $this->tdheight=0;","            $this->tdalign=\"L\";","            $this->tdbgcolor=false;","        }","        if($tag=='TR') { // TR-END","            $this->Ln();","        }","        if($tag=='TABLE') { // TABLE-END","            $this->tableborder=0;","        }","    ","        if($tag=='STRONG')","            $tag='B';","        if($tag=='EM')","            $tag='I';","        if($tag=='B' || $tag=='I' || $tag=='U')","            $this->SetStyle($tag,false);","        if($tag=='A')","            $this->HREF='';","        if($tag=='FONT'){","            if ($this->issetcolor==true) {","                $this->SetTextColor(0);","            }","            if ($this->issetfont) {","                $this->SetFont('arial');","                $this->issetfont=false;","            }","        }","    }","    ","    function SetStyle($tag, $enable)","    {","        //Modify style and select corresponding font","        $this->$tag+=($enable ? 1 : -1);","        $style='';","        foreach(array('B','I','U') as $s) {","            if($this->$s>0)","                $style.=$s;","        }","        $this->SetFont('',$style);","    }","    ","    function PutLink($URL, $txt)","    {","        //Put a hyperlink","        $this->SetTextColor(0,0,255);","        $this->SetStyle('U',true);","        $this->Write(5,$txt,$URL);","        $this->SetStyle('U',false);","        $this->SetTextColor(0);","    }","","}//end of class"],"id":10}],[{"start":{"row":1,"column":14},"end":{"row":1,"column":15},"action":"insert","lines":["."],"id":11}],[{"start":{"row":1,"column":15},"end":{"row":1,"column":16},"action":"insert","lines":["."],"id":12}],[{"start":{"row":1,"column":16},"end":{"row":1,"column":17},"action":"insert","lines":["/"],"id":13}],[{"start":{"row":1,"column":16},"end":{"row":1,"column":17},"action":"remove","lines":["/"],"id":14}],[{"start":{"row":1,"column":15},"end":{"row":1,"column":16},"action":"remove","lines":["."],"id":15}],[{"start":{"row":1,"column":14},"end":{"row":1,"column":15},"action":"remove","lines":["."],"id":16}],[{"start":{"row":155,"column":20},"end":{"row":155,"column":42},"action":"insert","lines":["$this->tdbgcolor=true;"],"id":74}],[{"start":{"row":154,"column":80},"end":{"row":155,"column":0},"action":"insert","lines":["",""],"id":73},{"start":{"row":155,"column":0},"end":{"row":155,"column":20},"action":"insert","lines":["                    "]}],[{"start":{"row":154,"column":66},"end":{"row":154,"column":71},"action":"remove","lines":["$coul"],"id":71},{"start":{"row":154,"column":66},"end":{"row":154,"column":73},"action":"insert","lines":["$polCol"]}],[{"start":{"row":154,"column":53},"end":{"row":154,"column":58},"action":"remove","lines":["$coul"],"id":70},{"start":{"row":154,"column":53},"end":{"row":154,"column":60},"action":"insert","lines":["$polCol"]}],[{"start":{"row":154,"column":40},"end":{"row":154,"column":45},"action":"remove","lines":["$coul"],"id":69},{"start":{"row":154,"column":40},"end":{"row":154,"column":47},"action":"insert","lines":["$polCol"]}],[{"start":{"row":154,"column":39},"end":{"row":154,"column":74},"action":"insert","lines":["($coul['R'],$coul['G'],$coul['B']);"],"id":68}],[{"start":{"row":154,"column":27},"end":{"row":154,"column":39},"action":"insert","lines":["SetTextColor"],"id":67}],[{"start":{"row":154,"column":26},"end":{"row":154,"column":27},"action":"insert","lines":[">"],"id":66}],[{"start":{"row":154,"column":25},"end":{"row":154,"column":26},"action":"insert","lines":["-"],"id":65}],[{"start":{"row":154,"column":25},"end":{"row":154,"column":26},"action":"remove","lines":["*"],"id":64}],[{"start":{"row":154,"column":25},"end":{"row":154,"column":26},"action":"insert","lines":["*"],"id":63}],[{"start":{"row":154,"column":25},"end":{"row":154,"column":26},"action":"remove","lines":[" "],"id":62}],[{"start":{"row":154,"column":25},"end":{"row":154,"column":26},"action":"insert","lines":[" "],"id":61}],[{"start":{"row":154,"column":20},"end":{"row":154,"column":23},"action":"remove","lines":["$th"],"id":60},{"start":{"row":154,"column":20},"end":{"row":154,"column":25},"action":"insert","lines":["$this"]}],[{"start":{"row":154,"column":22},"end":{"row":154,"column":23},"action":"insert","lines":["h"],"id":59}],[{"start":{"row":154,"column":21},"end":{"row":154,"column":22},"action":"insert","lines":["t"],"id":58}],[{"start":{"row":154,"column":20},"end":{"row":154,"column":21},"action":"insert","lines":["$"],"id":57}],[{"start":{"row":153,"column":55},"end":{"row":154,"column":0},"action":"insert","lines":["",""],"id":56},{"start":{"row":154,"column":0},"end":{"row":154,"column":20},"action":"insert","lines":["                    "]}],[{"start":{"row":153,"column":43},"end":{"row":153,"column":50},"action":"remove","lines":["BGCOLOR"],"id":55},{"start":{"row":153,"column":43},"end":{"row":153,"column":51},"action":"insert","lines":["polColor"]}],[{"start":{"row":153,"column":28},"end":{"row":153,"column":54},"action":"insert","lines":["hex2dec($attr['BGCOLOR']);"],"id":54}],[{"start":{"row":153,"column":27},"end":{"row":153,"column":28},"action":"insert","lines":["="],"id":53}],[{"start":{"row":153,"column":26},"end":{"row":153,"column":27},"action":"insert","lines":["l"],"id":52}],[{"start":{"row":153,"column":25},"end":{"row":153,"column":26},"action":"insert","lines":["o"],"id":51}],[{"start":{"row":153,"column":24},"end":{"row":153,"column":25},"action":"insert","lines":["C"],"id":50}],[{"start":{"row":153,"column":23},"end":{"row":153,"column":24},"action":"insert","lines":["l"],"id":49}],[{"start":{"row":153,"column":22},"end":{"row":153,"column":23},"action":"insert","lines":["o"],"id":48}],[{"start":{"row":153,"column":21},"end":{"row":153,"column":22},"action":"insert","lines":["p"],"id":47}],[{"start":{"row":153,"column":20},"end":{"row":153,"column":21},"action":"insert","lines":["$"],"id":46}],[{"start":{"row":152,"column":46},"end":{"row":154,"column":17},"action":"insert","lines":["","                    ","                }"],"id":45}],[{"start":{"row":152,"column":45},"end":{"row":152,"column":46},"action":"insert","lines":["{"],"id":44}],[{"start":{"row":152,"column":40},"end":{"row":152,"column":41},"action":"insert","lines":["r"],"id":43}],[{"start":{"row":152,"column":39},"end":{"row":152,"column":40},"action":"insert","lines":["o"],"id":42}],[{"start":{"row":152,"column":38},"end":{"row":152,"column":39},"action":"insert","lines":["l"],"id":41}],[{"start":{"row":152,"column":37},"end":{"row":152,"column":38},"action":"insert","lines":["o"],"id":40}],[{"start":{"row":152,"column":36},"end":{"row":152,"column":37},"action":"insert","lines":["C"],"id":39}],[{"start":{"row":152,"column":35},"end":{"row":152,"column":36},"action":"insert","lines":["l"],"id":38}],[{"start":{"row":152,"column":34},"end":{"row":152,"column":35},"action":"insert","lines":["o"],"id":37}],[{"start":{"row":152,"column":33},"end":{"row":152,"column":34},"action":"insert","lines":["p"],"id":36}],[{"start":{"row":152,"column":32},"end":{"row":152,"column":34},"action":"insert","lines":["''"],"id":35}],[{"start":{"row":152,"column":31},"end":{"row":152,"column":33},"action":"insert","lines":["[]"],"id":34}],[{"start":{"row":152,"column":26},"end":{"row":152,"column":30},"action":"remove","lines":["$att"],"id":33},{"start":{"row":152,"column":26},"end":{"row":152,"column":31},"action":"insert","lines":["$attr"]}],[{"start":{"row":152,"column":29},"end":{"row":152,"column":30},"action":"insert","lines":["t"],"id":32}],[{"start":{"row":152,"column":28},"end":{"row":152,"column":29},"action":"insert","lines":["t"],"id":31}],[{"start":{"row":152,"column":27},"end":{"row":152,"column":28},"action":"insert","lines":["a"],"id":30}],[{"start":{"row":152,"column":26},"end":{"row":152,"column":27},"action":"insert","lines":["$"],"id":29}],[{"start":{"row":152,"column":25},"end":{"row":152,"column":27},"action":"insert","lines":["()"],"id":28}],[{"start":{"row":152,"column":24},"end":{"row":152,"column":25},"action":"insert","lines":["y"],"id":27}],[{"start":{"row":152,"column":23},"end":{"row":152,"column":24},"action":"insert","lines":["t"],"id":26}],[{"start":{"row":152,"column":22},"end":{"row":152,"column":23},"action":"insert","lines":["p"],"id":25}],[{"start":{"row":152,"column":21},"end":{"row":152,"column":22},"action":"insert","lines":["m"],"id":24}],[{"start":{"row":152,"column":20},"end":{"row":152,"column":21},"action":"insert","lines":["e"],"id":23}],[{"start":{"row":152,"column":19},"end":{"row":152,"column":20},"action":"insert","lines":["!"],"id":22}],[{"start":{"row":152,"column":18},"end":{"row":152,"column":20},"action":"insert","lines":["()"],"id":21}],[{"start":{"row":152,"column":17},"end":{"row":152,"column":18},"action":"insert","lines":["f"],"id":20}],[{"start":{"row":152,"column":16},"end":{"row":152,"column":17},"action":"insert","lines":["i"],"id":19}],[{"start":{"row":152,"column":16},"end":{"row":152,"column":20},"action":"remove","lines":["    "],"id":18}],[{"start":{"row":151,"column":21},"end":{"row":152,"column":0},"action":"insert","lines":["",""],"id":17},{"start":{"row":152,"column":0},"end":{"row":152,"column":20},"action":"insert","lines":["                    "]}]]},"ace":{"folds":[],"scrolltop":660,"scrollleft":14,"selection":{"start":{"row":1,"column":14},"end":{"row":1,"column":14},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1491922313593,"hash":"f3c618bd50cf396fea71e7f2eb60153276a6ab75"}